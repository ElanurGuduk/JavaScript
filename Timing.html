<!DOCTYPE html>
<!-- saved from url=(0041)https://maeyler.github.io/305/work/Timing -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="https://maeyler.github.io/305/images/icon192.png">
    <script src="Database.js"></script>



</head>

<body>
<h2>Timing</h2>

<h3 id="title"> Simple Clock </h3>


<h3>Set Intersection</h3>
<button onclick="timing()">search</button>

<p id="out">
<a href="https://maeyler.github.io/BLM305-2018/exam/Midterm%20solution.pdf">
2018 exam</a>
<br>Data contains 189314 chars, 3129 lines <br>3129 students, 1135 distinct names</p>

<hr>
<h3>Sample code</h3>
<pre id="sample">function intersect1(a, b) { //fast<br>    let s = new Set()<br>    for (let x of a)<br>      if (b.has(x)) s.add(x)<br>    return s<br>}<br>function intersect2(a, b) { //slow<br>    let s = new Set()<br>    for (let x of a)<br>      for (let y of b)<br>        if (x == y) s.add(x)<br>    return s<br>}</pre>
<hr>

<script>
"use strict";
// Simple Clock
var hm, time;
function twoDigits(t) {
    if (t>9) return ""+t;
    return "0"+t;
}
function setHourMin() {
    const d = new Date();
    hm = twoDigits(d.getHours())+":"
        +twoDigits(d.getMinutes());
    document.title = "Clock "+hm;
    //console.log(hm);
}

// Make a large Set
const url = "https://maeyler.github.io/JS/data/"
const array = []     // Student ids
const map = new Map() // distinct names
function readData(file) {
    console.log("readData "+file)
    fetch(url+file)
        .then(r => r.text())
        .then(addStudents)
        .catch(console.error)
}
function parseStudent(line) {
    let [id, name, gpa, ...L] = line.split('\t')
    let std = new Student(id, name, gpa)
    std.courses = L; return std
}
function addStudents(txt) {
    let msg = "<br>Data contains "
         + txt.length+" chars, "
    let a = txt.split('\n')
    msg += a.length+" lines <br>"
    for (let s of a) {
      let std = parseStudent(s)
      array.push(std.id); map.set(std.id,std)
    }
    msg += array.length+" students, "
    msg += map.size+" distinct names"
    out.innerHTML += msg
}

function timing(f) {
    let count1=0
    let count2=0
    let t1=0
    let t2=0
    for(let i=0; i<10000; i++){
        let id=String(Math.random()).substring(2,5)
         t1 = performance.now(); //more accurate than Date.now()
        t2 = performance.now();
        if(map.has(id+""))
            count1++
        t1 = performance.now() - t1
        if(array.includes(id+""))
            count2++
        t2 = performance.now()-t2
    }

    let s="\nArray:"+t1.toPrecision(3)+"msec"+count1;

    out.innerText+="\n"+s;

    //out.innerHTML += "<br>"+s; console.log(s)
}
    //
  //  sample.innerText = intersect1+'\n'+intersect2

    readData("Students.txt")
    title.innerText = document.title;
</script>



</body></html>
